<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Genera QR Code</title>
</head>

<body>
    <div class="navbar">
        <a href="index.html">Link</a>
        <a href="immagini.html">Immagini</a>
        <a href="testo.html">Testo</a>
        <a href="altro.html">Altro</a>
    </div>
    <div class="container">
        <h1>Genera QR Code</h1>
        <form id="linkForm">
            <input type="url" id="linkInput" placeholder="Inserisci il link" required>
            <button type="submit">Genera QR Code</button>
        </form>
        <div id="qrcode"></div>
        <button id="download">Scarica QR Code</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <script>
        const form = document.getElementById('linkForm');
        const linkInput = document.getElementById('linkInput');
        const qrCodeContainer = document.getElementById('qrcode');
        const downloadButton = document.getElementById('download');

        form.addEventListener('submit', function(event) {
            event.preventDefault();

            // Pulisci eventuali QR Code precedenti
            qrCodeContainer.innerHTML = '';
            downloadButton.style.display = 'none';

            const link = linkInput.value;
            if (link) {
                // Genera il QR Code
                QRCode.toCanvas(link, {
                    errorCorrectionLevel: 'H'
                }, function(error, canvas) {
                    if (error) {
                        console.error('Errore nella generazione del QR Code:', error);
                        return;
                    }

                    // Aggiungi il QR Code al contenitore
                    qrCodeContainer.appendChild(canvas);

                    // Mostra il pulsante di download
                    downloadButton.style.display = 'block';

                    // Imposta l'evento di download
                    downloadButton.onclick = function() {
                        const link = document.createElement('a');
                        link.download = 'qrcode.png';
                        link.href = canvas.toDataURL('image/png');
                        link.click();
                    };
                });
            }
        });
    </script>
</body>

</html>
